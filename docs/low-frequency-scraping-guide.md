# 低頻度スクレイピング + エンゲージメント取得ガイド

## ユーザーの要望

1. **エンゲージメント（反応率）が見たい** - RSSではいいね数が分からない
2. **コストを抑えたい** - 100ドルかけるほどの価値はない
3. **ブログは重要ではない** - ユーザーの反応が見たい
4. **低頻度アクセス** - 1日1回程度のざっと見る程度

## 推奨される解決策

### 1. Reddit/HackerNewsのスコアを活用（最推奨・完全無料）

**Reddit**と**HackerNews**は既にエンゲージメント情報（スコア）を取得しています：

- **Reddit**: `score`（アップボート数 - ダウンボート数）
- **HackerNews**: `points`（ユーザーの投票数）

これらは**完全無料**で、**利用規約違反のリスクもありません**。

#### メリット
- ✅ 完全無料
- ✅ 利用規約違反のリスクなし
- ✅ エンゲージメント情報（スコア）を取得可能
- ✅ ユーザーの反応が見える
- ✅ 既に実装済み

#### 現在の実装状況
- Reddit: スコアを取得し、`user_voices`テーブルの`score`フィールドに保存
- HackerNews: ポイントを取得し、`user_voices`テーブルの`score`フィールドに保存

### 2. 低頻度スクレイピング（1日1回・自己責任）

1日1回程度の低頻度アクセスなら、リスクを下げられます。

#### 実装済み機能
- `/api/fetch-twitter-scrape` - X（Twitter）の投稿をスクレイピングで取得
- エンゲージメント（いいね、リツイート、返信）を取得
- アカウント間に5秒待機（レート制限回避）

#### 使用方法
```bash
# 1日1回程度の実行を推奨
curl http://localhost:3000/api/fetch-twitter-scrape
```

#### 注意事項
- ⚠️ 利用規約違反のリスクがあります
- ⚠️ 自己責任で使用してください
- ⚠️ 1日1回程度の低頻度アクセスのみ推奨
- ⚠️ 個人利用・非公開用途に限定

#### リスク軽減策
1. **低頻度アクセス**: 1日1回程度
2. **アカウント間の待機**: 5秒以上
3. **エンゲージメントフィルタリング**: 反応率の高い投稿のみ取得
4. **監視対象を最小限に**: 最重要アカウント3つのみ

### 3. ハイブリッドアプローチ（推奨）

**Reddit/HNをメイン**、**Twitterスクレイピングを補完**として使用：

1. **Reddit/HN**: 毎日自動取得（完全無料、安全）
2. **Twitterスクレイピング**: 週1回程度の手動実行（補完的な情報源）

これにより、コストゼロで、エンゲージメント情報も取得できます。

## 実装状況

### 既に実装済み

1. **Redditスコア取得**: `utils/community-fetcher.ts`
   - スコア（エンゲージメント）を取得
   - `user_voices`テーブルに保存

2. **HackerNewsポイント取得**: `utils/community-fetcher.ts`
   - ポイント（エンゲージメント）を取得
   - `user_voices`テーブルに保存

3. **Twitterスクレイピング**: `utils/twitter-scraper.ts`
   - エンゲージメント（いいね、リツイート、返信）を取得
   - 低頻度アクセス用

### 使い方

#### Reddit/HNのエンゲージメントを確認
```bash
# コミュニティ情報を取得（スコア付き）
curl http://localhost:3000/api/fetch-community

# スコアの高い投稿を確認
sqlite3 data/ai-pulse.db "SELECT title, score FROM user_voices WHERE source = 'reddit' ORDER BY score DESC LIMIT 10;"
```

#### Twitterスクレイピング（1日1回程度）
```bash
# 低頻度スクレイピング（自己責任）
curl http://localhost:3000/api/fetch-twitter-scrape
```

## 推奨される運用方法

### 完全無料で運用（最推奨）

1. **Reddit/HNをメインに使用**
   - 毎日自動取得
   - エンゲージメント情報（スコア）を取得
   - 完全無料、安全

2. **Twitterスクレイピングは使わない**
   - リスクを避ける
   - Reddit/HNで十分な情報が取得できる

### 補完的にTwitterスクレイピングを使用

1. **Reddit/HN**: 毎日自動取得（メイン）
2. **Twitterスクレイピング**: 週1回程度の手動実行（補完）

## 結論

**Reddit/HNのスコア（エンゲージメント）を活用することを最優先に推奨します。**

- ✅ 完全無料
- ✅ 利用規約違反のリスクなし
- ✅ エンゲージメント情報を取得可能
- ✅ ユーザーの反応が見える

Twitterスクレイピングは「補完的な情報源」として、必要に応じて低頻度で使用することを推奨します。

